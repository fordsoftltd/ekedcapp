

<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"

        xmlns:h="http://xmlns.jcp.org/jsf/html">

    <p:dialog header="Customer Verification" showEffect="fade" modal="false"
              widgetVar="detailDialog"
              responsive="true" position="top" maximizable="true"
              fitViewport="true" minimizable="true" height="85vh" width="90vw" blockScroll="true">
        
            <div class="p-grid ui-fluid dashboard" style="margin:0px; padding:0px">

                    <div class="p-col-12">
                            <p:tabView id="parent" styleClass="ui-fluid"
                                       style="padding:0px; margin:-5px; border-left:none; border-bottom:
                                       none; border-right: none;" dynamic="true">
                                <p:tab title="Current Data" titleStyle="font-size:20px; font-weight:bold; color:#039BE5"
                                >
                                  <p:outputPanel>
                                    <p:panelGrid  styleClass="ui-panelgrid-blank form-group" columns="2"  layout="grid"
                                                  columnClasses="ui-grid-col-8,ui-grid-col-4" style="margin-left:-30px; padding:0px;">
                                        <p:panelGrid  styleClass="ui-panelgrid-blank form-group" columns="2" columnClasses="ui-grid-col-4,ui-grid-col-8"
                                                      style=" padding:0px; margin-left:-21px;">
                                            <h:outputLabel value="CIN"/>
                                            <p:outputPanel id="cinholder">
                                                <h:outputText value="#{verifyController.currentCustomer.cin}"/>
                                                <p:autoUpdate/>
                                            </p:outputPanel>
                                            <h:outputLabel value="District"/>
                                            <h:outputText value="#{verifyController.currentCustomer.districtName}"/>
                                            <h:outputLabel value="Feeder"/>
                                            <h:outputText value="#{verifyController.currentCustomer.feederName}"/>

                                            <h:outputLabel value="Transformer"/>
                                            <p:outputPanel id="transformerresult">
                                                <h:outputText value="#{verifyController.currentCustomer.transformername}"/>

                                            </p:outputPanel>
                                            <h:outputLabel value="CABLE UPRISER"/>
                                            <h:outputText value="#{verifyController.currentCustomer.upriser}"/>

                                            <h:outputLabel value="CUSTOMER NAME"/>
                                            <p:inputText value="#{verifyController.currentCustomer.CUSTOMERNAMEonBILL}" disabled="true">
                                                <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                            </p:inputText>
                                            <h:outputLabel value=""/>
                                           <h:panelGroup styleClass="p-field">
                                               <p:outputLabel>Account No</p:outputLabel>
                                               <p:inputText value="#{verifyController.currentCustomer.customerACCOUNTNO}" disabled="true"/>
                                           </h:panelGroup>

                                            <h:outputLabel value="TARIFF"/>
                                            <h:outputText value="#{verifyController.currentCustomer.tariff}"/>


                                            <h:outputLabel value="METER NO"/>
                                            <p:inputText value="#{verifyController.currentCustomer.meterno}" disabled="true">
                                                <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                            </p:inputText>

                                            <h:outputLabel value="BUSINESS TYPE"/>
                                            <h:outputText value="#{verifyController.currentCustomer.natureOfUseElectricity}"/>

                                            <h:outputLabel value="HOUSE TYPE"/>
                                            <h:outputText value="#{verifyController.currentCustomer.premisestype}"/>

                                            <h:outputLabel value="PH ADDRESS"/>

                                            <p:inputText value="#{verifyController.currentCustomer.physicalAddress}" disabled="true">
                                                <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                            </p:inputText>

                                            <h:outputLabel value="LATITUDE"/>

                                            <h:outputText value="#{verifyController.currentCustomer.lat}"/>
                                            <h:outputLabel value="LONGITUDE"/>

                                            <h:outputText value="#{verifyController.currentCustomer.longs}"/>
                                            <h:outputLabel value="Ltpole Id"/>
                                            <p:inputText value="#{verifyController.currentCustomer.ltpoleid}" disabled="true">
                                                <p:ajax listener="#{verifyController.updateCustomer}" ignoreAutoUpdate="true" update="cinholder"/>
                                            </p:inputText>

                                            <h:outputText value="Verified?" />
                                            <p:selectOneMenu value="#{verifyController.currentCustomer.done}" disabled="true">
                                                <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                                <f:selectItem itemLabel="Not Completed" itemValue="false" />
                                                <f:selectItem itemLabel="Completed" itemValue="true" />

                                                <p:ajax listener="#{verifyController.updateCustomer_v2}" ignoreAutoUpdate="true"/>
                                            </p:selectOneMenu>
                                            <h:outputText value="Comment"/>
                                            <p:inputTextarea value="#{verifyController.currentCustomer.comments}" disabled="true">
                                                <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                            </p:inputTextarea>
                                        </p:panelGrid>
                                        <p:panelGrid  styleClass="ui-panelgrid-blank form-group" columns="1" style="padding:0px;  margin-right:-5px;">
                                            <p:barcode type="qr" format="png"
                                                       value="http://www.ekoelectricitydata.com.ng/verify/customer?cin=#{verifyController.currentCustomer.cin}"
                                                       width="150" height="150" cache="true" />

                                            <p:commandButton value="Logout" icon="ui-icon-close"
                                                             actionListener="#{verifyController.clearCustomerVerification}"
                                                             style="background-color:#039BE5;" />
                                        </p:panelGrid>
                                    </p:panelGrid>
                                      <p:autoUpdate/>
                                  </p:outputPanel>
                                </p:tab>
                                <p:tab title="Previous Data" titleStyle="font-size:20px; font-weight:bold; color:#039BE5">

                                    <p:outputPanel>
                                        <p:outputLabel value="No record history available"/>
                                    </p:outputPanel>
                                    <p:accordionPanel value="#{verifyController.customerhistoryList}"
                                                      var="rs" style="border-left:none; border-bottom: none; border-right: none;
                                                  margin:-20px; padding:0px; padding-top:20px;"
                                                      id="rs" rendered="#{verifyController.customerhistoryList !=null || verifyController.customerhistoryList.size()>0}">
                                        <p:tab title="#{rs.cin}">
                                            <p:outputPanel>
                                            <p:panelGrid  styleClass="ui-panelgrid-blank form-group" columns="2" columnClasses="ui-grid-col-5,ui-grid-col-7"
                                                          style=" padding:0px; margin-left:-21px;">


                                                <h:outputLabel value="CUSTOMER NAME"/>
                                                <h:outputText value="#{rs.CUSTOMERNAMEonBILL}"/>
                                                <h:outputLabel value="FEEDER"/>
                                                <h:outputText value="#{rs.feederName}"/>
                                                <h:outputLabel value="TRANSFORMER"/>
                                                <h:outputText value="#{rs.transformername}"/>
                                                <h:outputLabel value="CABLE UPRISER"/>
                                                <h:outputText value="#{rs.cableUpriserID}"/>
                                                <h:outputLabel value="POLE NO"/>
                                                <h:outputText value="#{rs.HTPoleID}"/>
                                                <h:outputLabel value="UPRISER NO"/>
                                                <h:outputText value="#{rs.cableUpriserID}"/>
                                                <h:outputLabel value="ACCOUNT NO"/>
                                                <h:outputText value="#{rs.customerACCOUNTNO}"/>
                                                <h:outputLabel value="TARIFF"/>
                                                <p:selectOneMenu value="#{rs.tariff}" filter="true" filterMatchMode="contains">
                                                    <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{verifyController.tflist}" var="tf" itemLabel="#{tf.label}" itemValue="#{tf.value}"
                                                                   itemDescription="#{tf.description}"/>

                                                </p:selectOneMenu>
                                                <h:outputLabel value="METER NO"/>
                                                <h:outputText value="#{rs.meterno}" />

                                                <h:outputLabel value="BUSINESS TYPE"/>
                                                <p:selectOneMenu value="#{rs.billingtype}" filter="true" filterMatchMode="contains">
                                                    <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{verifyController.businessList}" var="bs" itemLabel="#{bs}" itemValue="#{bs}"
                                                                   itemDescription="#{bs}"/>
                                                    <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                                </p:selectOneMenu>
                                                <h:outputLabel value="HOUSE TYPE"/>
                                                <p:selectOneMenu value="#{rs.premisestype}" filter="true" filterMatchMode="contains">
                                                    <f:selectItem itemLabel="--Select--" noSelectionOption="true"/>
                                                    <f:selectItems value="#{verifyController.houseList}" var="hs" itemLabel="#{hs}" itemValue="#{hs}"
                                                                   itemDescription="#{hs}"/>
                                                    <p:ajax listener="#{verifyController.updateCustomerData}"/>
                                                </p:selectOneMenu>

                                                <h:outputLabel value="LATITUDE"/>

                                                <h:outputText value="#{rs.lat}"/>
                                                <h:outputLabel value="LONGITUDE"/>

                                                <h:outputText value="#{rs.longs}"/>
                                            </p:panelGrid>
                                                <p:autoUpdate/>
                                            </p:outputPanel>
                                        </p:tab>
                                    </p:accordionPanel>
                                </p:tab>
                            </p:tabView>

                    </div>

            </div>
      

    </p:dialog>

</ui:composition>




